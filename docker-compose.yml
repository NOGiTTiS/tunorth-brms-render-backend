
services:
  # ส่วนของ Database PostgreSQL 17
  db:
    image: postgres:17-alpine
    container_name: tunorth_db
    restart: always
    environment:
      - POSTGRES_USER=admin
      - POSTGRES_PASSWORD=password123
      - POSTGRES_DB=tunorth-brms_db
    ports:
      - '5433:5432'
    volumes:
      - db_data:/var/lib/postgresql/data

  # ส่วนของ pgAdmin (หน้าเว็บจัดการ DB)
  pgadmin:
    image: dpage/pgadmin4
    container_name: tunorth_pgadmin
    restart: always
    environment:
      PGADMIN_DEFAULT_EMAIL: admin@admin.com  # อีเมลสำหรับล็อกอินเข้า pgAdmin
      PGADMIN_DEFAULT_PASSWORD: root          # รหัสผ่านสำหรับเข้า pgAdmin
    ports:
      - "5050:80" # เข้าใช้งานผ่าน localhost:5050
    depends_on:
      - db

volumes:
  db_data: